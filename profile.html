<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–•–≤–∏–ª—ñ –î–æ–±—Ä–∞ - –ü—Ä–æ—Ñ—ñ–ª—å</title>
    <style>
         :root {
            --blue-light: #e0f2ff;
            --blue: #2196f3;
            --blue-dark: #1565c0;
            --red: #f44336;
        }
        
        body,
        html {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--blue-light);
            color: #333;
            height: 100%;
        }
        
        #profile-tab {
            padding: 1em;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            padding: 15px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .profile-photo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--blue);
        }
        
        .profile-header h2 {
            margin: 0 0 5px 0;
            color: var(--blue-dark);
        }
        
        .user-city {
            margin: 0 0 10px 0;
            color: #666;
            font-size: 14px;
        }
        
        .wave-count-badge {
            background: var(--blue-light);
            color: var(--blue-dark);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            display: inline-block;
        }
        
        .wave-count-badge span {
            font-size: 16px;
            color: var(--blue);
        }
        
        .profile-section {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .profile-section h3 {
            margin-top: 0;
            color: var(--blue-dark);
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .info-item {
            margin-bottom: 15px;
        }
        
        .info-label {
            font-weight: bold;
            color: #555;
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .info-value {
            color: #333;
        }
        
        .help-description {
            background: var(--blue-light);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0 0 0;
        }
        
        .referral-container {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
        
        .referral-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
            font-size: 14px;
        }
        
        .copy-btn {
            background: var(--blue);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0 15px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .copy-btn:hover {
            background: var(--blue-dark);
        }
        
        .referral-hint,
        .map-hint {
            font-size: 13px;
            color: #666;
            margin: 5px 0 0 0;
        }
        
        .waves-visualization {
            width: 100%;
            height: 150px;
            position: relative;
            margin: 15px 0;
            overflow: hidden;
            border-radius: 10px;
            background: linear-gradient(to bottom, #e0f2ff, #ffffff);
        }
        
        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20px;
            background: url('data:image/svg+xml;utf8,<svg viewBox="0 0 1440 320" xmlns="http://www.w3.org/2000/svg"><path fill="rgba(33, 150, 243, 0.3)" d="M0,192L48,197.3C96,203,192,213,288,229.3C384,245,480,267,576,250.7C672,235,768,181,864,181.3C960,181,1056,235,1152,234.7C1248,235,1344,181,1392,154.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') repeat-x;
            background-size: 1440px 100%;
            animation: waveAnimation 10s linear infinite;
        }
        
        .wave:nth-child(2) {
            animation-duration: 8s;
            opacity: 0.5;
            background-position: 0 10px;
        }
        
        .wave:nth-child(3) {
            animation-duration: 12s;
            opacity: 0.3;
            background-position: 0 15px;
        }
        
        @keyframes waveAnimation {
            0% {
                background-position-x: 0;
            }
            100% {
                background-position-x: 1440px;
            }
        }
        
        .wave-point {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--blue);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
        }
        
        .wave-label {
            position: absolute;
            font-size: 12px;
            color: white;
            background: var(--blue-dark);
            padding: 2px 5px;
            border-radius: 10px;
            transform: translate(-50%, -100%);
            z-index: 3;
        }
        
        .waves-list {
            margin-top: 20px;
        }
        
        .wave-person {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .wave-person img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }
        
        .wave-person-info {
            flex: 1;
        }
        
        .wave-person-name {
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .wave-person-city {
            font-size: 12px;
            color: #666;
        }
        
        .profile-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .edit-profile-btn,
        .share-profile-btn {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .edit-profile-btn {
            background: var(--blue);
            color: white;
        }
        
        .edit-profile-btn:hover {
            background: var(--blue-dark);
        }
        
        .share-profile-btn {
            background: white;
            color: var(--blue);
            border: 1px solid var(--blue);
        }
        
        .share-profile-btn:hover {
            background: var(--blue-light);
        }
        
        .empty-state {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        
        .main-header {
            background: var(--blue);
            color: white;
            padding: 10px 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            font-size: 20px;
            font-weight: bold;
        }
        
        .header-nav {
            display: flex;
            gap: 10px;
        }
        
        .header-btn {
            background: white;
            color: var(--blue-dark);
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
            text-decoration: none;
        }
        
        .header-btn:hover {
            background: var(--blue-light);
        }
    </style>
</head>

<body>
    <header class="main-header">
        <div class="header-container">
            <div class="logo">üåä –•–≤–∏–ª—ñ –î–æ–±—Ä–∞</div>
            <nav class="header-nav">
                <a class="header-btn" href="index.html">–ö–∞—Ä—Ç–∞</a>
                <a class="header-btn" href="admin.html">–ê–¥–º—ñ–Ω</a>
            </nav>
        </div>
    </header>
    <main>
        <div id="profile-tab" class="tab-content">
            <div class="profile-header">
                <img id="user-photo" src="https://via.placeholder.com/150" class="profile-photo" />
                <div>
                    <h2 id="user-name">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</h2>
                    <p class="user-city" id="user-city">–ú—ñ—Å—Ç–æ –Ω–µ –≤–∫–∞–∑–∞–Ω–æ</p>
                    <div class="wave-count-badge">
                        <span id="user-waves">0</span> —Ö–≤–∏–ª—å –¥–æ–±—Ä–∞
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <h3>–ú–æ—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h3>
                <div class="info-item">
                    <span class="info-label">–°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ—Å—Ç—å:</span>
                    <span id="user-specialty" class="info-value">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">–§–æ—Ä–º–∞—Ç –¥–æ–ø–æ–º–æ–≥–∏:</span>
                    <span id="user-format" class="info-value">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">–û–ø–∏—Å –¥–æ–ø–æ–º–æ–≥–∏:</span>
                    <p id="user-help" class="help-description">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
                </div>
            </div>

            <div class="profile-section">
                <h3>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞</h3>
                <div class="info-item">
                    <span class="info-label">–í–∞—à–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:</span>
                    <div class="referral-container">
                        <input type="text" id="user-referral-input" readonly class="referral-input" value="–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è..." />
                        <button onclick="copyReferralLink()" class="copy-btn">–ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
                    </div>
                    <p class="referral-hint">–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è —Ü–∏–º –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º, —â–æ–± –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –±—ñ–ª—å—à–µ —Ö–≤–∏–ª—å –¥–æ–±—Ä–∞</p>
                </div>
                <div class="info-item">
                    <span class="info-label">–í–∏ –ø—Ä–∏–π—à–ª–∏ –≤—ñ–¥:</span>
                    <span id="user-came-from" class="info-value">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span>
                </div>
            </div>

            <div class="profile-section">
                <h3>–ú–æ—ó —Ö–≤–∏–ª—ñ</h3>
                <div class="waves-visualization">
                    <div class="waves-container" id="waves-container">
                        <div class="loading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö...</div>
                    </div>
                </div>
                <div class="waves-list" id="waves-list">
                    <div class="loading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ö–≤–∏–ª—å...</div>
                </div>
            </div>

            <div class="profile-actions">
                <button class="edit-profile-btn" onclick="editProfile()">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</button>
                <button class="share-profile-btn" onclick="shareProfile()">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è –ø—Ä–æ—Ñ—ñ–ª–µ–º</button>
            </div>
        </div>
    </main>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω–∞ –∑–º—ñ–Ω–Ω–∞ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
        let userDatabase = {};
        let currentUserId = "2106431200"; // Default to Roman's ID for demo

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ user_data.json
        async function loadUserData() {
            try {
                const response = await fetch('user_data.json');
                if (!response.ok) {
                    throw new Error('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ');
                }
                userDatabase = await response.json();
                console.log('–î–∞–Ω—ñ —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ:', userDatabase);

                // –ü—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –æ–Ω–æ–≤–ª—é—î–º–æ –ø—Ä–æ—Ñ—ñ–ª—å
                loadProfileData();
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö:', error);
                // Use fallback data if fetch fails
                userDatabase = {
                    "2106431200": {
                        "name": "—Ä–æ–º–∞–Ω",
                        "format": "online",
                        "specialty": "—è –±—É—Ö–≥–∞–ª—Ç–µ—Ä",
                        "help_description": "–Ø –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –º–æ–∂—É –ø–æ—Ä–∞—Ö—É–≤–∞—Ç–∏ –≤–∞–º –≤–∞—à—ñ –≥—Ä–æ—â—ñ",
                        "referal": "https://t.me/Wave_of_Kindness_bot?start=referal_2106431200",
                        "came_from": "2106431200",
                        "wave_proof": "https://t.me/Wave_of_Kindness_bot?start=referal_2106431200"
                    },
                    "7148034659": {
                        "came_from": "2106431200",
                        "wave_proof": "https://t.me/Wave_of_Kindness_bot?start=referal_2106431200",
                        "name": "–¥–º–∏—Ç—Ä–æ",
                        "specialty": "—è —Å–∞–Ω—Ç–µ—Ö–Ω—ñ–∫",
                        "help_description": "–Ø –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –º–æ–∂—É –≤—ñ–¥—Ä–µ–º–æ–Ω—Ç—É–≤–∞—Ç–∏ –∫—Ä–∞–Ω",
                        "referal": "https://t.me/Wave_of_Kindness_bot?start=referal_7148034659",
                        "user_wave_link": "https://t.me/Wave_of_Kindness_bot?start=referal_2106431200"
                    }
                };
                loadProfileData();
                alert('–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ —á–µ—Ä–µ–∑ –ø–æ–º–∏–ª–∫—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.');
            }
        }

        // –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è —Ä–æ–±–æ—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—é
        function copyReferralLink() {
            const input = document.getElementById('user-referral-input');
            input.select();
            document.execCommand('copy');
            alert('–ü–æ—Å–∏–ª–∞–Ω–Ω—è —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!');
        }

        function editProfile() {
            alert('–§—É–Ω–∫—Ü—ñ—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞–π–±–ª–∏–∂—á–∏–º —á–∞—Å–æ–º');
        }

        function shareProfile() {
            const referralLink = document.getElementById('user-referral-input').value;
            if (referralLink && referralLink !== '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...') {
                window.open(`https://t.me/share/url?url=${encodeURIComponent(referralLink)}&text=–ü—Ä–∏—î–¥–Ω—É–π—Å—è –¥–æ –•–≤–∏–ª—å –î–æ–±—Ä–∞!`, '_blank');
            } else {
                alert('–ó–∞—á–µ–∫–∞–π—Ç–µ, –ø–æ–∫–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–∞—Ç—å—Å—è –¥–∞–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—é');
            }
        }

        function loadProfileData() {
            // –û—Ç—Ä–∏–º—É—î–º–æ –¥–∞–Ω—ñ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
            const userData = userDatabase[currentUserId] || {};

            // –ó–∞–ø–æ–≤–Ω—é—î–º–æ –¥–∞–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—é
            document.getElementById('user-name').textContent = userData.name || '–ê–Ω–æ–Ω—ñ–º';
            document.getElementById('user-city').textContent = userData.city || '–ú—ñ—Å—Ç–æ –Ω–µ –≤–∫–∞–∑–∞–Ω–æ';
            document.getElementById('user-specialty').textContent = userData.specialty || '–ù–µ –≤–∫–∞–∑–∞–Ω–æ';
            document.getElementById('user-format').textContent = userData.format === 'online' ? '–û–Ω–ª–∞–π–Ω' : '–û—Ñ–ª–∞–π–Ω';
            document.getElementById('user-help').textContent = userData.help_description || '–ù–µ –≤–∫–∞–∑–∞–Ω–æ';
            document.getElementById('user-referral-input').value = userData.referal || 'https://t.me/Wave_of_Kindness_bot';

            if (userData.photo_url) {
                document.getElementById('user-photo').src = userData.photo_url;
            } else {
                document.getElementById('user-photo').src = "https://via.placeholder.com/150";
            }

            // –í–∏–∑–Ω–∞—á–∞—î–º–æ —Ö—Ç–æ –∑–∞–ø—Ä–æ—Å–∏–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
            if (userData.came_from && userData.came_from !== currentUserId) {
                const referrer = userDatabase[userData.came_from];
                document.getElementById('user-came-from').textContent = referrer ? referrer.name : '–ù–µ–≤—ñ–¥–æ–º–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á';
            } else {
                document.getElementById('user-came-from').textContent = '–ù—ñ—Ö—Ç–æ';
            }

            // –†–∞—Ö—É—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ö–≤–∏–ª—å (—Ä–µ—Ñ–µ—Ä–∞–ª—ñ–≤)
            let waveCount = 0;
            const referrals = [];

            // –®—É–∫–∞—î–º–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —è–∫—ñ –ø—Ä–∏–π—à–ª–∏ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
            for (const id in userDatabase) {
                if (userDatabase[id].came_from === currentUserId) {
                    waveCount++;
                    referrals.push(userDatabase[id]);
                }
            }

            document.getElementById('user-waves').textContent = waveCount;

            // –í—ñ–∑—É–∞–ª—ñ–∑—É—î–º–æ —Ö–≤–∏–ª—ñ
            visualizeWaves(referrals);
        }

        function visualizeWaves(referrals) {
            const container = document.getElementById('waves-container');
            const listContainer = document.getElementById('waves-list');

            // –û—á–∏—â–∞—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
            container.innerHTML = '';
            listContainer.innerHTML = '';

            // –î–æ–¥–∞—î–º–æ —Ñ–æ–Ω–æ–≤—ñ –∞–Ω—ñ–º–æ–≤–∞–Ω—ñ —Ö–≤–∏–ª—ñ
            for (let i = 0; i < 3; i++) {
                const wave = document.createElement('div');
                wave.classList.add('wave');
                container.appendChild(wave);
            }

            // –Ø–∫—â–æ –Ω–µ–º–∞—î —Ä–µ—Ñ–µ—Ä–∞–ª—ñ–≤
            if (referrals.length === 0) {
                const empty = document.createElement('div');
                empty.classList.add('empty-state');
                empty.textContent = '–£ –≤–∞—Å –ø–æ–∫–∏ –Ω–µ–º–∞—î —Ö–≤–∏–ª—å –¥–æ–±—Ä–∞ üòî';
                listContainer.appendChild(empty);
                return;
            }

            // –î–æ–¥–∞—î–º–æ —Ç–æ—á–∫–∏ —Ç–∞ –º—ñ—Ç–∫–∏ –Ω–∞ —Ö–≤–∏–ª—ñ
            referrals.forEach((ref, index) => {
                // –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞ —Ç–æ—á–∫–∞ –Ω–∞ —Ö–≤–∏–ª—ñ
                const point = document.createElement('div');
                point.classList.add('wave-point');
                point.style.left = `${(index + 1) * (100 / (referrals.length + 1))}%`;
                point.style.bottom = '30px';
                container.appendChild(point);

                // –ú—ñ—Ç–∫–∞ –Ω–∞–¥ —Ç–æ—á–∫–æ—é
                const label = document.createElement('div');
                label.classList.add('wave-label');
                label.style.left = point.style.left;
                label.style.bottom = '50px';
                label.textContent = ref.name.split(' ')[0]; // Show only first name
                container.appendChild(label);

                // –î–æ–¥–∞—î–º–æ –¥–æ —Å–ø–∏—Å–∫—É
                const person = document.createElement('div');
                person.classList.add('wave-person');

                const img = document.createElement('img');
                img.src = ref.photo_url || 'https://via.placeholder.com/40';
                img.alt = ref.name;

                const info = document.createElement('div');
                info.classList.add('wave-person-info');

                const name = document.createElement('div');
                name.classList.add('wave-person-name');
                name.textContent = ref.name;

                const city = document.createElement('div');
                city.classList.add('wave-person-city');
                city.textContent = ref.city || '–ú—ñ—Å—Ç–æ –Ω–µ –≤–∫–∞–∑–∞–Ω–æ';

                info.appendChild(name);
                info.appendChild(city);
                person.appendChild(img);
                person.appendChild(info);
                listContainer.appendChild(person);
            });
        }

        // –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        document.addEventListener('DOMContentLoaded', loadUserData);
    </script>
</body>

</html>
